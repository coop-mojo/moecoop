# 生協の知恵袋

生協の知恵袋は，[Master of Epic](http://moepic.com/top.php?mid=_) のバインダーやアイテム・レシピ情報を参照できる予定のツールです．

## できること
- バインダーに登録されているレシピの管理
- レシピの詳細確認 (まだ一部)
- アイテムの詳細確認 (まだ一部)
  - 食事バフ等の詳細情報の確認 (まだ一部)
- バインダー内のレシピを検索
- 複数のバインダーからレシピをまとめて検索
- [C/Migemo](http://www.kaoriya.net/software/cmigemo/) を利用したいい感じの検索 (別途 C/Migemo for Windows 32bit のインストールが必要です)
  - katsu でカツ丼やカツを検索できます (ローマ字のまま検索)
  - cookie でクッキーを，bread でパンを検索できます (英語でも検索)
  - soi でソード オブ インフェルノを検索できます (略称検索)

## そのうちやりたいこと
- キャラクターごとのバインダー管理
  - 内部では既に対応済み
  - デフォルトのキャラクターは "かきあげ" です．

- バインダーごとではなく，料理や醸造等のカテゴリーごとのレシピの確認
  - 準備はできた
- レシピ完全対応
  - 順次作業中
- アイテム完全対応
  - 順次作業中
- 生産道具の性能確認
- レシピで作れるアイテムの価格の自動計算
- NPC店舗での販売アイテムの確認
- 各クエストでもらえるアイテムの確認
- 指定したスキルの範囲内で作れるレシピの検索
- 指定したアイテムを，端数が出ないように作成するための支援機能
- ルーレットのMGマス等の数の確認
  - 成功マスの算出式がわからないので対応できないかも．情報求む．
- 一番下に生協の広告を入れる
```
＿人人人人人人人＿
＞　焼き鳥@50g　＜
￣Y^Y^Y^Y^Y^Y￣
```

新機能の要望等は[Issues](https://github.com/coop-mojo/moecoop/issues)に登録してくれたら対応するかもしれません．
- 画面右上の `New Issue` をクリックして登録できます．

## できないこと

- 選んだアイテムを自動で取ってくる機能
- 欲しいアイテムを値切る機能
- 御庭番を召喚する機能

## 開発に参加したい人向け

生協の知恵袋の作成には以下が必要です．

- DMD (D言語処理系)
- DUB (D言語のパッケージマネージャ)

DMD と DUB は，Windows のパッケージマネージャーの[chocolatey](https://chocolatey.org)からインストールできます．

生協の知恵袋は，Windows，Linux，Mac 環境で動作するマルチプラットフォームアプリケーションです．

## レシピやアイテムを追加したい人向け

resource 以下を編集することで，レシピやアイテム，食事バフ等の追加や編集を行えます．
以下がフォルダ構成です．

- `resource`
  - `バインダー`
    - 各バインダーに登録されているレシピ名の情報
    - 例えば `食べ物.json` 等には，`食べ物`，`食べ物 No.2`，`食べ物 No.3` のバインダー情報が書かれています．
  - `食べ物`
    - 効果や食事バフ等の，食べ物固有の情報
    - `食べ物.json` に情報が書かれています．
    - 量が多いため，中間素材や肉料理等のカテゴリごとにファイルを分けるかも
  - `飲み物`
    - 効果や飲み物バフ等の，飲み物固有の情報
    - `飲み物.json` に情報が書かれています．
  - `飲食バフ`
    - 飲食バフの効果時間やグループ等の詳細情報
    - `食べ物バフ.json` に食べ物バフ，`飲み物.json` に飲み物バフの情報が書かれています．
    - 1つのファイルにまとめるかも
  - `武器`
    - 攻撃力や射程等の武器固有の情報
    - `武器.json` に情報を追加する予定ですが，まだ仕様が決まっていません．
    - 刀剣や槍等の武器カテゴリごとにファイルを分けるかも
  - `素材`
    - 重さやNPCへの売却価格等の，全てのアイテムに共通する情報
    - ペットアイテム情報はここに書かれています
    - 他と同様にファイルを分けるかも
  - `レシピ`
    - 必要な素材や要求されるスキル等の詳細情報
    - `料理.json` や `鍛冶.json` 等，[Moe Wiki](http://moeread.usamimi.info/index.php?MoE%20Wiki%20-%20Master%20of%20Epic)の各カテゴリごとに分割されています．
  - `クエスト`
    - まだ仕様が決まっていません．
    - 大体愛のかけらのせい
  - `dict`
    - Migemo 検索で使用するための辞書ファイル
    - `moe-dict` が辞書ファイルです．

全てのファイルはテキストであるため，テキストエディタで編集を行えます．
- Migemo の辞書ファイルである `moe-dict` の各行は変換前の単語，タブ，変換後の単語が順に並んでいます．
- `moe-dict` 以外のファイルは [JSON 形式](https://ja.wikipedia.org/wiki/JavaScript_Object_Notation)で書かれています．
  - 読めば大体の構造はわかるかも
- メモ帳には `resource` 以下のファイルをまともに編集するための機能が備わっていないため，[サクラエディタ](http://sakura-editor.sourceforge.net) や [Atom](https://atom.io) 等の他のエディタを使いましょう．

## このドキュメントに不足しているもの

- 使い方
  - Migemo のインストール方法を追加する
  - マニュアルを追加する
- 開発周り
  - 開発環境のインストール方法を追加する
  - ビルド方法を追加する
  - 修正して公式サイトから Pull Request を送る方法を追加する

- データ仕様
  - 各ファイル形式の詳細を追加する
  - 追加，修正したものを送る方法を追加する

